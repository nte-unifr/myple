{% set route = app.request.attributes.get('_route') %}
{% set route_params = app.request.attributes.get('_route_params') %}
{% set params = route_params|merge(app.request.query.all) %}

<nav id="navbar-nte" class="navbar fixed-top navbar-expand-md navbar-light bg-light">
  <span class="navbar-brand mb-0 h1 d-flex align-items-center">
    <a href="//unifr.ch"><img src="{{ asset('images/square.png') }}" width="40" height="40" alt="" class="mr-4"></a>
    <a href="{{ path('tasks_index') }}">Myple</a>
  </span>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <div class="navbar-nav mr-auto">
      <a class="nav-item nav-link {{ tasks_active }}" href="{{ path('tasks_index') }}">{{ 'tasks'|trans }}</a>
      <a class="nav-item nav-link {{ tools_active }}" href="{{ path('tools_index') }}">{{ 'tools'|trans }}</a>
    </div>
    <div class="navbar-nav">
      <a class="nav-item nav-link {{ about_active }}" href="{{ path('about') }}">{{ 'about'|trans }}</a>
      <a class="nav-item nav-link" href="http://www3.unifr.ch/nte/fr/contact.html">{{ 'contact'|trans }} <i class="fal fa-external-link-square-alt"></i></a>
      <li class="nav-item dropdown">
        <a class="nav-link" href="#" id="languageDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="far fa-language"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="languageDropdown">
          <a class="dropdown-item {% if "fr" in app.request.locale %}active{% endif %}" href="{{ path(route, params|merge({ _locale: 'fr' })) }}">
            <span class="flag-icon flag-icon-fr flag-icon-squared rounded-circle"></span> FranÃ§ais
          </a>
          <a class="dropdown-item {% if "de" in app.request.locale %}active{% endif %}" href="{{ path(route, params|merge({ _locale: 'de' })) }}">
            <span class="flag-icon flag-icon-de flag-icon-squared rounded-circle"></span> Deutsch
          </a>
          <a class="dropdown-item {% if "it" in app.request.locale %}active{% endif %}" href="{{ path(route, params|merge({ _locale: 'it' })) }}">
            <span class="flag-icon flag-icon-it flag-icon-squared rounded-circle"></span> Italiano
          </a>
          <a class="dropdown-item {% if "en" in app.request.locale %}active{% endif %}" href="{{ path(route, params|merge({ _locale: 'en' })) }}">
            <span class="flag-icon flag-icon-gb flag-icon-squared rounded-circle"></span> English
          </a>
        </div>
      </li>
    </div>
  </div>
</nav>